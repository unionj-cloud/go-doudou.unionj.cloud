import{r as o,o as c,a as i,b as s,e as l,w as r,F as t,g as a,f as n}from"./app.cfbfaac6.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";var d="/images/greeting.png",u="/images/greeting1.png";const b={},m=a(`<h1 id="\u5FEB\u901F\u5F00\u59CB" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a> \u5FEB\u901F\u5F00\u59CB</h1><h2 id="\u5148\u51B3\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5148\u51B3\u6761\u4EF6" aria-hidden="true">#</a> \u5148\u51B3\u6761\u4EF6</h2><ul><li>\u5982\u679CGo\u7248\u672C\u4F4E\u4E8E1.16\u4E14\u5927\u4E8E\u6216\u7B49\u4E8E1.15\uFF0C\u9700\u8BBE\u7F6E<code>GO111MODULE=on</code>\u5F00\u542F\u6A21\u5757\u652F\u6301</li><li>\u5982\u679CGo\u7248\u672C\u9AD8\u4E8E1.16\uFF0C\u652F\u6301</li><li>\u5982\u679CGo\u7248\u672C\u4F4E\u4E8E1.15\uFF0C\u4ECEv1.0.3\u5F00\u59CB\u4E0D\u518D\u652F\u6301</li></ul><h2 id="\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h2><ul><li>\u5982\u679CGo\u7248\u672C\u4F4E\u4E8E1.17</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v github.com/unionj-cloud/go-doudou@v1.0.6</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>\u5982\u679CGo\u7248\u672C &gt;= 1.17\uFF0C\u63A8\u8350\u91C7\u7528\u5982\u4E0B\u547D\u4EE4\u5168\u5C40\u5B89\u88C5<code>go-doudou</code>\u547D\u4EE4\u884C\u5DE5\u5177</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou@v1.0.6</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u63A8\u8350\u91C7\u7528\u5982\u4E0B\u547D\u4EE4\u4E0B\u8F7Dgo-doudou\u4F5C\u4E3A\u9879\u76EE\u7684\u4F9D\u8D56</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go get -v -d github.com/unionj-cloud/go-doudou@v1.0.6</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u5982\u679C\u9047\u5230<code>410 Gone error</code>\u62A5\u9519\uFF0C\u8BF7\u5148\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF0C\u518D\u6267\u884C\u4E0A\u8FF0\u7684\u5B89\u88C5\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GOSUMDB=off</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5B89\u88C5\u5B8C\u6210\u540E\uFF0C\u5982\u679C\u9047\u5230<code>go-doudou: command not found</code>\u62A5\u9519\uFF0C\u8BF7\u5C06<code>$HOME/go/bin</code>\u914D\u7F6E\u5230<code>~/.bash_profile</code>\u6587\u4EF6\u91CC\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#6A9955;"># .bash_profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># Get the aliases and functions</span></span>
<span class="line"><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> [ -f ~/.bashrc ]; </span><span style="color:#C586C0;">then</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#DCDCAA;">.</span><span style="color:#D4D4D4;"> ~/.bashrc</span></span>
<span class="line"><span style="color:#C586C0;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># User specific environment and startup programs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">PATH=</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#D4D4D4;">:/usr/local/go/bin</span></span>
<span class="line"><span style="color:#D4D4D4;">PATH=</span><span style="color:#9CDCFE;">$PATH</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">$HOME</span><span style="color:#D4D4D4;">/go/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> PATH</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div><h2 id="\u5347\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u5347\u7EA7" aria-hidden="true">#</a> \u5347\u7EA7</h2><p>\u4F60\u53EF\u4EE5\u6267\u884C\u547D\u4EE4<code>go-doudou version</code>\u6765\u5347\u7EA7\u5168\u5C40\u5B89\u88C5\u7684<code>go-doudou</code>\u547D\u4EE4\u884C\u5DE5\u5177</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou version                       </span></span>
<span class="line"><span style="color:#D4D4D4;">Installed version is v0.9.8</span></span>
<span class="line"><span style="color:#D4D4D4;">Latest release version is v1.0.6</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2714 Yes</span></span>
<span class="line"><span style="color:#D4D4D4;">go install -v github.com/unionj-cloud/go-doudou@v1.0.6</span></span>
<span class="line"><span style="color:#D4D4D4;">go: downloading github.com/unionj-cloud/go-doudou v1.0.6</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/columnenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/sortenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/nullenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/keyenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/extraenum</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/config</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/constants</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/stringutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sliceutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/templateutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/wrapper</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/pathutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/framework/internal/config</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/copier</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/executils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/cmd/internal/astutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/logutils</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/test</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/name</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/ddlast</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/openapi/v3</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/table</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/openapi/v3/codegen/client</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/framework/internal/codegen</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/toolkit/sqlext/codegen</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/ddl</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/svc</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou/cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">github.com/unionj-cloud/go-doudou</span></span>
<span class="line"><span style="color:#D4D4D4;">DONE</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou version</span></span>
<span class="line"><span style="color:#D4D4D4;">Installed version is v1.0.6</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  ~ </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u7528\u6CD5" aria-hidden="true">#</a> \u7528\u6CD5</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  ~ go-doudou -h                            </span></span>
<span class="line"><span style="color:#D4D4D4;">go-doudou works like a scaffolding tool but more than that. </span></span>
<span class="line"><span style="color:#D4D4D4;">it lets api providers design their apis and </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;"> them code less. </span></span>
<span class="line"><span style="color:#D4D4D4;">it generates openapi 3.0 spec json document </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> frontend developers or other api consumers to understand what apis there, </span></span>
<span class="line"><span style="color:#D4D4D4;">consumers can import it into postman to debug and test, or upload it into some code generators to download client sdk.</span></span>
<span class="line"><span style="color:#D4D4D4;">it provides some useful components and middleware </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> constructing microservice cluster like service register and discovering, </span></span>
<span class="line"><span style="color:#D4D4D4;">load balancing and so on. it just begins, more features will come out soon.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Usage:</span></span>
<span class="line"><span style="color:#D4D4D4;">  go-doudou [flags]</span></span>
<span class="line"><span style="color:#D4D4D4;">  go-doudou [command]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Available Commands:</span></span>
<span class="line"><span style="color:#D4D4D4;">  ddl         migration tool between database table structure and golang struct</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;">        Help about any </span><span style="color:#DCDCAA;">command</span></span>
<span class="line"><span style="color:#D4D4D4;">  name        bulk add or update struct fields json tag</span></span>
<span class="line"><span style="color:#D4D4D4;">  svc         generate or update service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Flags:</span></span>
<span class="line"><span style="color:#D4D4D4;">  -h, --help      </span><span style="color:#DCDCAA;">help</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> go-doudou</span></span>
<span class="line"><span style="color:#D4D4D4;">  -v, --version   version </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> go-doudou</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">Use </span><span style="color:#CE9178;">&quot;go-doudou [command] --help&quot;</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> more information about a command.  </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="hello-world" tabindex="-1"><a class="header-anchor" href="#hello-world" aria-hidden="true">#</a> Hello World</h2><h3 id="\u521D\u59CB\u5316\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u521D\u59CB\u5316\u9879\u76EE" aria-hidden="true">#</a> \u521D\u59CB\u5316\u9879\u76EE</h3><p>\u6267\u884C <code>go-doudou svc init</code> \u547D\u4EE4\uFF0C\u4F60\u53EF\u4EE5\u8BBE\u7F6E<code>-m</code>\u53C2\u6570\uFF0C\u6307\u5B9A\u6A21\u5757\u540D\u79F0\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc init helloworld -m github.com/unionj-cloud/helloworld</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8FD9\u884C\u547D\u4EE4\u4F1A\u751F\u6210<code>helloworld</code>\u6587\u4EF6\u5939\u548C\u4E00\u4E9B\u521D\u59CB\u5316\u6587\u4EF6\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 tree -a 
.
\u251C\u2500\u2500 .env
\u251C\u2500\u2500 .git
\u2502\xA0\xA0 \u251C\u2500\u2500 HEAD
\u2502\xA0\xA0 \u251C\u2500\u2500 objects
\u2502\xA0\xA0 \u2502\xA0\xA0 \u251C\u2500\u2500 info
\u2502\xA0\xA0 \u2502\xA0\xA0 \u2514\u2500\u2500 pack
\u2502\xA0\xA0 \u2514\u2500\u2500 refs
\u2502\xA0\xA0     \u251C\u2500\u2500 heads
\u2502\xA0\xA0     \u2514\u2500\u2500 tags
\u251C\u2500\u2500 .gitignore
\u251C\u2500\u2500 Dockerfile
\u251C\u2500\u2500 go.mod
\u251C\u2500\u2500 svc.go
\u2514\u2500\u2500 vo
    \u2514\u2500\u2500 vo.go

8 directories, 7 files
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li><p><code>Dockerfile</code>\uFF1A\u7528\u4E8E\u6253\u5305docker\u955C\u50CF</p></li><li><p><code>svc.go</code>: \u5728\u8FD9\u4E2A\u6587\u4EF6\u91CC\u7684<code>Helloworld</code>\u63A5\u53E3\u91CC\u9762\u5B9A\u4E49\u65B9\u6CD5\uFF0Cgo-doudou\u901A\u8FC7\u4F60\u5B9A\u4E49\u7684\u65B9\u6CD5\u751F\u6210\u5BF9\u5E94\u7684RESTful\u63A5\u53E3\u4EE3\u7801</p></li><li><p><code>vo</code>\u5305\uFF1A\u91CC\u9762\u5B9A\u4E49<code>view object</code>\u7ED3\u6784\u4F53\uFF0C\u7528\u4E8E\u8BF7\u6C42\u4F53\u548C\u54CD\u5E94\u4F53\uFF0C\u53EF\u4EE5\u624B\u52A8\u521B\u5EFA\u591A\u4E2Ago\u6587\u4EF6\uFF0C<code>vo</code>\u5305\u91CC\u5B9A\u4E49\u7684\u7ED3\u6784\u4F53\u90FD\u4F1A\u4F5C\u4E3A<code>OpenAPI 3.0</code>\u7684<code>schema</code>\u751F\u6210\u5230json\u683C\u5F0F\u7684\u63A5\u53E3\u6587\u6863\u4E2D</p></li><li><p><code>.env</code>: \u914D\u7F6E\u6587\u4EF6\uFF0C\u91CC\u9762\u7684\u914D\u7F6E\u4F1A\u88AB\u52A0\u8F7D\u5230\u73AF\u5883\u53D8\u91CF\u91CC</p></li></ul><h3 id="\u5B9A\u4E49\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5B9A\u4E49\u63A5\u53E3" aria-hidden="true">#</a> \u5B9A\u4E49\u63A5\u53E3</h3>`,24),y=s("code",null,"svc.go",-1),g=n("\u6587\u4EF6\u76F8\u5F53\u4E8E\u662F\u63A5\u53E3\u5B9A\u4E49\u6587\u4EF6\uFF0C\u6211\u4EEC\u5728"),h=s("code",null,"Helloworld",-1),_=n("\u63A5\u53E3\u91CC\u5B9A\u4E49\u65B9\u6CD5\u5C31\u662F\u5728\u5B9A\u4E49\u63A5\u53E3\u3002\u6211\u4EEC\u73B0\u5728\u6CE8\u91CA\u6389\u9ED8\u8BA4\u751F\u6210\u7684\u4F8B\u5B50"),v=s("code",null,"PageUsers",-1),f=n("\u65B9\u6CD5\uFF0C\u5B9A\u4E49\u6211\u4EEC\u81EA\u5DF1\u7684\u4E00\u4E2A\u63A5\u53E3"),C=s("code",null,"Greeting",-1),E=n("\u3002\u8BF7\u53C2\u9605"),k=n("Define API"),x=n(" \u7AE0\u8282\u5185\u5BB9\u4E86\u89E3\u66F4\u591A\u3002"),w=a(`<div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;helloworld/vo&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">Helloworld</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#6A9955;">// You can define your service methods as your need. Below is an example.</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#6A9955;">// PageUsers(ctx context.Context, query vo.PageQuery) (code int, data vo.PageRet, err error)</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="\u751F\u6210\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u751F\u6210\u4EE3\u7801" aria-hidden="true">#</a> \u751F\u6210\u4EE3\u7801</h3><p>\u5148\u6267\u884C\u5982\u4E0B\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc http --handler -c --doc</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u518D\u6267\u884C<code>go mod tidy</code>\u6765\u4E0B\u8F7D\u4F9D\u8D56\u3002 If you use go 1.17, you will see below instruction: \u5982\u679C\u4F60\u4F7F\u7528\u7684Go\u7248\u672C\u662F1.17\uFF0C\u4F60\u53EF\u80FD\u4F1A\u770B\u5230\u5982\u4E0B\u63D0\u793A\u4FE1\u606F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">To upgrade to the versions selected by go 1.16:
	go mod tidy -go=1.16 &amp;&amp; go mod tidy -go=1.17
If reproducibility with go 1.16 is not needed:
	go mod tidy -compat=1.17
For other options, see:
	https://golang.org/doc/modules/pruning
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u8FD9\u65F6\u4F60\u9700\u8981\u6267\u884C\u547D\u4EE4<code>go mod tidy -go=1.16 &amp;&amp; go mod tidy -go=1.17</code>\u6216\u8005<code>go mod tidy -compat=1.17</code>\u3002 \u8BA9\u6211\u4EEC\u770B\u770B\u751F\u6210\u4E86\u4EC0\u4E48\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#DCDCAA;">.</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 Dockerfile</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 client</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 client.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u251C\u2500\u2500 clientproxy.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 iclient.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 cmd</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 main.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 config</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 config.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 db</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 db.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.mod</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 go.sum</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 helloworld_openapi3.json</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svc.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 svcimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 transport</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0 \u2514\u2500\u2500 httpsrv</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u251C\u2500\u2500 handler.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u251C\u2500\u2500 handlerimpl.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2502\xA0\xA0     \u2514\u2500\u2500 middleware.go</span></span>
<span class="line"><span style="color:#D4D4D4;">\u2514\u2500\u2500 vo</span></span>
<span class="line"><span style="color:#D4D4D4;">    \u2514\u2500\u2500 vo.go</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div>`,8),A=s("li",null,[s("code",null,"helloworld_openapi3.json"),n(": json\u683C\u5F0F\u7684"),s("code",null,"OpenAPI 3.0"),n("\u63A5\u53E3\u6587\u6863")],-1),j=s("li",null,[s("code",null,"helloworld_openapi3.go"),n(": \u5C06"),s("code",null,"OpenAPI 3.0"),n("\u63A5\u53E3\u6587\u6863\u7684\u5185\u5BB9\u8D4B\u503C\u7ED9\u4E00\u4E2A\u5168\u5C40\u7684\u53D8\u91CF\u7528\u4E8E\u5728\u7EBF\u6D4F\u89C8")],-1),q=s("code",null,"client",-1),O=n("\u5305: \u57FA\u4E8E"),B={href:"https://github.com/go-resty/resty",target:"_blank",rel:"noopener noreferrer"},I=n("resty"),N=n(" \u5C01\u88C5\u7684Go\u8BED\u8A00http\u8BF7\u6C42\u5BA2\u6237\u7AEF\u4EE3\u7801"),F=a("<li><code>cmd</code>\u5305: \u6574\u4E2A\u7A0B\u5E8F\u7684\u5165\u53E3</li><li><code>config</code>\u5305: \u7528\u4E8E\u52A0\u8F7D\u4E0E\u4E1A\u52A1\u76F8\u5173\u7684\u914D\u7F6E</li><li><code>db</code>\u5305: \u8FDE\u63A5\u6570\u636E\u5E93\u7684\u5DE5\u5177\u4EE3\u7801</li><li><code>svcimpl.go</code>: \u5728\u8FD9\u4E2A\u6587\u4EF6\u4E2D\u5B9E\u73B0\u63A5\u53E3\uFF0C\u7F16\u5199\u771F\u5B9E\u7684\u4E1A\u52A1\u903B\u8F91\u4EE3\u7801</li><li><code>transport</code>\u5305: http\u7F51\u7EDC\u5C42\u4EE3\u7801\uFF0C\u4E3B\u8981\u8D1F\u8D23\u89E3\u6790\u5165\u53C2\u548C\u7F16\u7801\u51FA\u53C2</li>",5),G=a(`<h3 id="\u542F\u52A8\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8\u670D\u52A1" aria-hidden="true">#</a> \u542F\u52A8\u670D\u52A1</h3><p>\u6267\u884C\u547D\u4EE4<code>go-doudou svc run</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 go-doudou svc run       </span></span>
<span class="line"><span style="color:#D4D4D4;"> _____                     _                    _</span></span>
<span class="line"><span style="color:#D4D4D4;">|  __ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">                  | |                  | |</span></span>
<span class="line"><span style="color:#D4D4D4;">| |  </span><span style="color:#D7BA7D;">\\/</span><span style="color:#D4D4D4;">  ___   ______   __| |  ___   _   _   __| |  ___   _   _</span></span>
<span class="line"><span style="color:#D4D4D4;">| | __  / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|______| / _</span><span style="color:#CE9178;">\` </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> </span><span style="color:#D4D4D4;">|</span><span style="color:#CE9178;"> / _\`</span><span style="color:#D4D4D4;"> | / _ </span><span style="color:#D7BA7D;">\\ </span><span style="color:#D4D4D4;">| | | |</span></span>
<span class="line"><span style="color:#D4D4D4;">| |_</span><span style="color:#D7BA7D;">\\ \\|</span><span style="color:#D4D4D4;"> (_) |        | (_| || (_) || |_| || (_| || (_) || |_| |</span></span>
<span class="line"><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">___/ </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">__/          </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">_,_| </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">_,_| </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">_,_| </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">__/  </span><span style="color:#D7BA7D;">\\_</span><span style="color:#D4D4D4;">_,_|</span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] ================ Registered Routes ================ </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] +-------------+--------+-------------------------+ </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] |    NAME     | METHOD |         PATTERN         | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] +-------------+--------+-------------------------+ </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] | Greeting    | POST   | /greeting               | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] | GetDoc      | GET    | /go-doudou/doc          | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] | GetOpenAPI  | GET    | /go-doudou/openapi.json | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] | Prometheus  | GET    | /go-doudou/prometheus   | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] | GetRegistry | GET    | /go-doudou/registry     | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] | GetConfig   | GET    | /go-doudou/config       | </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] +-------------+--------+-------------------------+ </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] =================================================== </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] Started </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> 468.771\xB5s                         </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 22:14:15] Http server is listening on :6060 </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="postman" tabindex="-1"><a class="header-anchor" href="#postman" aria-hidden="true">#</a> Postman</h3><p>\u5C06<code>helloworld_openapi3.json</code>\u6587\u4EF6\u5BFC\u5165postman\uFF0C\u6D4B\u8BD5<code>/greeting</code>\u63A5\u53E3\u3002\u4F60\u53EF\u4EE5\u770B\u5230\u8FD4\u56DE\u4E86\u5047\u6570\u636E\u3002 <img src="`+d+`" alt="greeting"></p><h3 id="\u5B9E\u73B0\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u63A5\u53E3" aria-hidden="true">#</a> \u5B9E\u73B0\u63A5\u53E3</h3><p>\u73B0\u5728\u6211\u4EEC\u8981\u5728<code>svcimpl.go</code>\u6587\u4EF6\u91CC\u5B9E\u73B0\u771F\u5B9E\u7684\u4E1A\u52A1\u903B\u8F91\u4E86\u3002\u8BA9\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E0B\u73B0\u5728\u7684\u4EE3\u7801\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/brianvoe/gofakeit/v6&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloworldImpl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	conf *config.Config</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#569CD6;">var</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">_result</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">		Data </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;"> = gofakeit.</span><span style="color:#DCDCAA;">Struct</span><span style="color:#D4D4D4;">(&amp;_result)</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> _result.Data, </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf *config.Config) Helloworld {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;HelloworldImpl{</span></span>
<span class="line"><span style="color:#D4D4D4;">		conf,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u6211\u4EEC\u91C7\u7528<a href="github.com/brianvoe/gofakeit">gofakeit</a> \u8FD9\u4E2A\u5E93\u5E2E\u6211\u4EEC\u751F\u6210\u5047\u6570\u636E\u3002\u6211\u4EEC\u9996\u5148\u9700\u8981\u5220\u6389\u8FD9\u4E9B\u4EE3\u7801\u3002</p><div class="language-go ext-go line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">package</span><span style="color:#D4D4D4;"> service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">import</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;context&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#CE9178;">&quot;github.com/unionj-cloud/helloworld/config&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">HelloworldImpl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">struct</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">	conf *config.Config</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> (receiver *HelloworldImpl) </span><span style="color:#DCDCAA;">Greeting</span><span style="color:#D4D4D4;">(ctx context.Context, greeting </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) (data </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, err </span><span style="color:#4EC9B0;">error</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> fmt.</span><span style="color:#DCDCAA;">Sprintf</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Hello </span><span style="color:#9CDCFE;">%s</span><span style="color:#CE9178;">&quot;</span><span style="color:#D4D4D4;">, greeting), </span><span style="color:#569CD6;">nil</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">func</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">NewHelloworld</span><span style="color:#D4D4D4;">(conf *config.Config) Helloworld {</span></span>
<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> &amp;HelloworldImpl{</span></span>
<span class="line"><span style="color:#D4D4D4;">		conf,</span></span>
<span class="line"><span style="color:#D4D4D4;">	}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>\u6211\u4EEC\u5220\u6389\u4E86\u7B2C15~19\u884C\u7684\u4EE3\u7801\uFF0C\u66FF\u6362\u6210\u4E86<code>return fmt.Sprintf(&quot;Hello %s&quot;, greeting), nil</code>\u3002\u6211\u4EEC\u518D\u6D4B\u4E00\u4E0B\u6548\u679C\u3002 <img src="`+u+'" alt="greeting1"> \u7528go-doudou\u5199RESTful\u63A5\u53E3\u662F\u4E0D\u662F\u975E\u5E38\u7B80\u5355\uFF01</p><h3 id="k8s\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#k8s\u90E8\u7F72" aria-hidden="true">#</a> K8S\u90E8\u7F72</h3>',12),H=n("\u6709\u5F88\u591A\u79CD\u90E8\u7F72go\u8BED\u8A00\u7684http\u670D\u52A1\u7684\u65B9\u6848\u3002\u6211\u4EEC\u8FD9\u91CC\u5C06"),P=s("code",null,"helloworld",-1),T=n("\u670D\u52A1\u90E8\u7F72\u5230k8s\u4E0A\u3002\u8BF7\u53C2\u8003"),R=n("Deployment"),M=n(" \u7AE0\u8282\u6765\u4E86\u89E3\u66F4\u591A\u3002"),S=a(`<h4 id="\u6784\u5EFAdocker\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u6784\u5EFAdocker\u955C\u50CF" aria-hidden="true">#</a> \u6784\u5EFAdocker\u955C\u50CF</h4><p>\u6267\u884C\u547D\u4EE4<code>go-doudou svc push -r wubin1989</code>\uFF0C\u522B\u5FD8\u8BB0\u5C06<code>wubin1989</code>\u6539\u6210\u4F60\u81EA\u5DF1\u7684\u8FDC\u7A0B\u955C\u50CF\u4ED3\u5E93\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 go-doudou svc push -r wubin1989</span></span>
<span class="line"><span style="color:#D4D4D4;">[+] Building 42.9s (13/13) FINISHED                                                                                                                                </span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [internal] load build definition from Dockerfile                                                                                                          0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; =&gt; transferring dockerfile: 778B                                                                                                                          0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [internal] load .dockerignore                                                                                                                             0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; =&gt; transferring context: 2B                                                                                                                               0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [internal] load metadata </span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> docker.io/library/golang:1.16.6-alpine                                                                                      13.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [1/8] FROM docker.io/library/golang:1.16.6-alpine@sha256:bc2db47c5f4a682f1315e0d484811d65bf094d3bcd824459b170714c91656190                                 0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [internal] load build context                                                                                                                             1.1s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; =&gt; transferring context: 50.40MB                                                                                                                          1.1s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; CACHED [2/8] WORKDIR /repo                                                                                                                                0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [3/8] ADD go.mod </span><span style="color:#DCDCAA;">.</span><span style="color:#D4D4D4;">                                                                                                                                        0.2s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [4/8] ADD go.sum </span><span style="color:#DCDCAA;">.</span><span style="color:#D4D4D4;">                                                                                                                                        0.0s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [5/8] ADD </span><span style="color:#DCDCAA;">.</span><span style="color:#D4D4D4;"> ./                                                                                                                                            0.9s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [6/8] RUN sed -i </span><span style="color:#CE9178;">&#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39;</span><span style="color:#D4D4D4;"> /etc/apk/repositories                                                                    0.6s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [7/8] RUN apk add --no-cache bash tzdata                                                                                                                 13.8s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; [8/8] RUN </span><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> GDD_VER=</span><span style="color:#CE9178;">$(go list -mod=vendor -m -f &#39;{{ .Version }}&#39; github.com/unionj-cloud/go-doudou)</span><span style="color:#D4D4D4;"> &amp;&amp; CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go bu  12.4s</span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; exporting to image                                                                                                                                        0.7s </span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; =&gt; exporting layers                                                                                                                                       0.6s </span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; =&gt; writing image sha256:d5c50cfd8ef750eba6a883f14edf2397df1901eadf924b39b9cedda1ad9495cd                                                                  0.0s </span></span>
<span class="line"><span style="color:#D4D4D4;"> =&gt; =&gt; naming to docker.io/library/helloworld                                                                                                                 0.0s </span></span>
<span class="line"><span style="color:#D4D4D4;">                                                                                                                                                                   </span></span>
<span class="line"><span style="color:#D4D4D4;">Use </span><span style="color:#CE9178;">&#39;docker scan&#39;</span><span style="color:#D4D4D4;"> to run Snyk tests against images to find vulnerabilities and learn how to fix them                                                               </span></span>
<span class="line"><span style="color:#D4D4D4;">The push refers to repository [docker.io/wubin1989/helloworld]</span></span>
<span class="line"><span style="color:#D4D4D4;">29d9439ae861: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">6e1f1247e3b5: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">b2b2a71f9880: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">681e9176b1dd: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">8e5de385ef21: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">0b35a2c6b44d: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">152447a5498b: Pushed </span></span>
<span class="line"><span style="color:#D4D4D4;">bb2e1759ebf5: Mounted from library/golang </span></span>
<span class="line"><span style="color:#D4D4D4;">fff907320fc1: Mounted from library/golang </span></span>
<span class="line"><span style="color:#D4D4D4;">6fbdad009c9d: Mounted from library/golang </span></span>
<span class="line"><span style="color:#D4D4D4;">1328cc49ba2b: Mounted from library/golang </span></span>
<span class="line"><span style="color:#D4D4D4;">72e830a4dff5: Mounted from library/golang </span></span>
<span class="line"><span style="color:#D4D4D4;">v20220213230159: digest: sha256:5bc59a7069be59ef670889d52b7bdd6acd62a171bc2415d54375592da793f8cc size: 2831</span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 23:03:11] image wubin1989/helloworld:v20220213230159 has been pushed successfully </span></span>
<span class="line"><span style="color:#D4D4D4;">INFO[2022-02-13 23:03:11] k8s yaml has been created/updated successfully. execute </span><span style="color:#DCDCAA;">command</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;go-doudou svc deploy&#39;</span><span style="color:#D4D4D4;"> to deploy service helloworld to k8s cluster</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>\u7136\u540E\u4F60\u53EF\u4EE5\u770B\u5230\u751F\u6210\u4E86\u4E24\u4E2Ayaml\u683C\u5F0F\u7684\u6587\u4EF6\uFF1A<code>helloworld_deployment.yaml</code>\u548C<code>helloworld_statefulset.yaml</code></p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u251C\u2500\u2500 Dockerfile
\u251C\u2500\u2500 client
\u2502\xA0\xA0 \u251C\u2500\u2500 client.go
\u2502\xA0\xA0 \u251C\u2500\u2500 clientproxy.go
\u2502\xA0\xA0 \u2514\u2500\u2500 iclient.go
\u251C\u2500\u2500 cmd
\u2502\xA0\xA0 \u2514\u2500\u2500 main.go
\u251C\u2500\u2500 config
\u2502\xA0\xA0 \u2514\u2500\u2500 config.go
\u251C\u2500\u2500 db
\u2502\xA0\xA0 \u2514\u2500\u2500 db.go
\u251C\u2500\u2500 go.mod
\u251C\u2500\u2500 go.sum
\u251C\u2500\u2500 helloworld_deployment.yaml
\u251C\u2500\u2500 helloworld_openapi3.go
\u251C\u2500\u2500 helloworld_openapi3.json
\u251C\u2500\u2500 helloworld_statefulset.yaml
\u251C\u2500\u2500 main
\u251C\u2500\u2500 svc.go
\u251C\u2500\u2500 svcimpl.go
\u251C\u2500\u2500 transport
\u2502\xA0\xA0 \u2514\u2500\u2500 httpsrv
\u2502\xA0\xA0     \u251C\u2500\u2500 handler.go
\u2502\xA0\xA0     \u251C\u2500\u2500 handlerimpl.go
\u2502\xA0\xA0     \u2514\u2500\u2500 middleware.go
\u2514\u2500\u2500 vo
    \u2514\u2500\u2500 vo.go
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>helloworld_deployment.yaml: \u7528\u4E8E\u90E8\u7F72\u65E0\u72B6\u6001\u7684\u670D\u52A1\uFF0C\u5982\u679C\u662F\u5355\u4F53\u67B6\u6784\uFF0C\u63A8\u8350\u91C7\u7528</li><li>helloworld_statefulset.yaml: \u7528\u4E8E\u90E8\u7F72\u6709\u72B6\u6001\u7684\u670D\u52A1\uFF0C\u5982\u679C\u662F\u5FAE\u670D\u52A1\u67B6\u6784\uFF0C\u63A8\u8350\u91C7\u7528</li></ul><h4 id="\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72" aria-hidden="true">#</a> \u90E8\u7F72</h4>`,7),U={class:"custom-container tip"},$=s("p",{class:"custom-container-title"},"\u63D0\u793A",-1),L=n("\u5982\u679C\u4F60\u8FD8\u6CA1\u6709\u5B89\u88C5Docker for Desktop\uFF0C\u8BF7\u4ECE"),V={href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"},Y=n("https://www.docker.com/products/docker-desktop"),z=n(" \u4E0B\u8F7D\u5B89\u88C5\u3002\u5982\u679C\u4F60\u5BF9docker\u548Ck8s\u4E0D\u4E86\u89E3\uFF0C\u8BF7\u53C2\u8003"),K={href:"https://docs.docker.com/get-started/overview/",target:"_blank",rel:"noopener noreferrer"},W=n("\u5B98\u65B9\u6587\u6863"),Q=n("\u3002"),J=a(`<p>\u5F53\u6267\u884C\u547D\u4EE4<code>go-doudou svc deploy</code>\u65F6\uFF0C\u9ED8\u8BA4\u91C7\u7528<code>helloworld_statefulset.yaml</code>\u6587\u4EF6\u6765\u90E8\u7F72\u6709\u72B6\u6001\u7684\u5E94\u7528\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc deploy</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u6267\u884C\u547D\u4EE4<code>kubectl get pods</code>\uFF0C\u53EF\u4EE5\u770B\u5230\u6211\u4EEC\u7684\u670D\u52A1\u5DF2\u7ECF\u5728\u8FD0\u884C\u4E86\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 kubectl get pods    </span></span>
<span class="line"><span style="color:#D4D4D4;">NAME                       READY   STATUS    RESTARTS   AGE</span></span>
<span class="line"><span style="color:#D4D4D4;">helloworld-statefulset-0   1/1     Running   0          11m</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6B64\u65F6\uFF0C\u4F60\u8FD8\u4E0D\u80FD\u901A\u8FC7<code>http://localhost:6060</code>\u8BBF\u95EE\u670D\u52A1\u3002\u9700\u8981\u5148\u914D\u7F6E\u4E00\u4E2A\u7AEF\u53E3\u8F6C\u53D1\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> POD_NAME=</span><span style="color:#CE9178;">$(kubectl get pods --namespace default -l &quot;app=helloworld&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">kubectl port-forward --namespace default </span><span style="color:#9CDCFE;">$POD_NAME</span><span style="color:#D4D4D4;"> 6060:6060 </span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u4F60\u770B\u5230\u547D\u4EE4\u884C\u7EC8\u7AEF\u6709\u5982\u4E0B\u5185\u5BB9\u8F93\u51FA\uFF0C\u5C31\u53EF\u4EE5\u7528postman\u6D4B\u8BD5\u63A5\u53E3\u4E86\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 </span><span style="color:#569CD6;">export</span><span style="color:#D4D4D4;"> POD_NAME=</span><span style="color:#CE9178;">$(kubectl get pods --namespace default -l &quot;app=helloworld&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span></span>
<span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 kubectl port-forward --namespace default </span><span style="color:#9CDCFE;">$POD_NAME</span><span style="color:#D4D4D4;"> 6060:6060                                               </span></span>
<span class="line"><span style="color:#D4D4D4;">Forwarding from 127.0.0.1:6060 -&gt; 6060</span></span>
<span class="line"><span style="color:#D4D4D4;">Forwarding from [::1]:6060 -&gt; 6060</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="\u5173\u95ED\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u5173\u95ED\u670D\u52A1" aria-hidden="true">#</a> \u5173\u95ED\u670D\u52A1</h4><p>\u6267\u884C\u547D\u4EE4<code>go-doudou svc shutdown</code>\u53EF\u4EE5\u5173\u95ED\u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">go-doudou svc shutdown</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u518D\u6B21\u6267\u884C\u547D\u4EE4<code>kubectl get pods</code>\uFF0C\u53EF\u4EE5\u770B\u5230\u670D\u52A1\u5DF2\u7ECF\u4E0B\u7EBF\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">\u279C  helloworld git:(master) \u2717 kubectl get pods                                                                                             </span></span>
<span class="line"><span style="color:#D4D4D4;">No resources found </span><span style="color:#C586C0;">in</span><span style="color:#D4D4D4;"> default namespace.</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,15);function X(Z,ss){const p=o("RouterLink"),e=o("ExternalLinkIcon");return c(),i(t,null,[m,s("p",null,[y,g,h,_,v,f,C,E,l(p,{to:"/guide/idl.html"},{default:r(()=>[k]),_:1}),x]),w,s("ul",null,[A,j,s("li",null,[q,O,s("a",B,[I,l(e)]),N]),F]),G,s("p",null,[H,P,T,l(p,{to:"/guide/deployment.html"},{default:r(()=>[R]),_:1}),M]),S,s("div",U,[$,s("p",null,[L,s("a",V,[Y,l(e)]),z,s("a",K,[W,l(e)]),Q])]),J],64)}var ls=D(b,[["render",X]]);export{ls as default};
